export interface Reading {
  day: number;
  date: string;
  readings: string[];
  book?: string;
  summary?: string;
}

export const readingPlan: Reading[] = [
  // نوفمبر 2025
  { day: 1, date: '2025-11-21', readings: ['متى 1', 'متى 8'], book: 'متى', summary: 'بداية إنجيل متى - نسب المسيح وميلاده المعجزي، ثم خدمة يسوع في شفاء المرضى وإظهار سلطانه على الطبيعة والأرواح الشريرة.' },
  { day: 2, date: '2025-11-22', readings: ['متى 9', 'متى 13'] },
  { day: 3, date: '2025-11-23', readings: ['متى 14', 'متى 20'] },
  { day: 4, date: '2025-11-24', readings: ['متى 21', 'متى 24'] },
  { day: 5, date: '2025-11-25', readings: ['متى 25', 'مرقس 1'], book: 'مرقس', summary: 'بداية إنجيل مرقس - يبدأ مباشرة بخدمة يسوع العلنية ومعموديته، ويركز على أعماله القوية وسلطانه.' },
  { day: 6, date: '2025-11-26', readings: ['مرقس 2', 'مرقس 6'] },
  { day: 7, date: '2025-11-27', readings: ['مرقس 7', 'مرقس 12'] },
  { day: 8, date: '2025-11-28', readings: ['مرقس 13', 'مرقس 16'] },
  { day: 9, date: '2025-11-29', readings: ['لوقا 1', 'لوقا 5'], book: 'لوقا', summary: 'بداية إنجيل لوقا - يقدم سرداً تفصيلياً لميلاد يوحنا المعمدان ويسوع، ويبرز رحمة المسيح تجاه الجميع.' },
  { day: 10, date: '2025-11-30', readings: ['لوقا 6', 'لوقا 9'] },
  { day: 11, date: '2025-12-01', readings: ['لوقا 10', 'لوقا 14'] },
  { day: 12, date: '2025-12-02', readings: ['لوقا 15', 'لوقا 19'] },
  { day: 13, date: '2025-12-03', readings: ['لوقا 20', 'لوقا 24'] },
  { day: 14, date: '2025-12-04', readings: ['يوحنا 1', 'يوحنا 5'], book: 'يوحنا', summary: 'بداية إنجيل يوحنا - يبدأ بإعلان لاهوت المسيح "الكلمة صار جسداً"، ويركز على هوية يسوع كابن الله.' },
  { day: 15, date: '2025-12-05', readings: ['يوحنا 6', 'يوحنا 10'] },
  { day: 16, date: '2025-12-06', readings: ['يوحنا 11', 'يوحنا 16'] },
  { day: 17, date: '2025-12-07', readings: ['يوحنا 17', 'أعمال 1'], book: 'أعمال الرسل', summary: 'بداية سفر أعمال الرسل - صعود المسيح وحلول الروح القدس يوم الخمسين، وبداية الكنيسة الأولى.' },
  { day: 18, date: '2025-12-09', readings: ['أعمال 2', 'أعمال 7'] },
  { day: 19, date: '2025-12-10', readings: ['أعمال 8', 'أعمال 11'] },
  { day: 20, date: '2025-12-11', readings: ['أعمال 12', 'أعمال 17'] },
  { day: 21, date: '2025-12-12', readings: ['أعمال 18', 'أعمال 23'] },
  { day: 22, date: '2025-12-13', readings: ['أعمال 24', 'أعمال 28'] },
  { day: 23, date: '2025-12-14', readings: ['رومية 1', 'رومية 7'], book: 'رومية', summary: 'بداية رسالة رومية - الرسول بولس يشرح عقيدة الخلاص بالإيمان والبر بالإيمان، وكيف أن جميع البشر خطاة يحتاجون للنعمة.' },
  { day: 24, date: '2025-12-15', readings: ['رومية 8', 'رومية 14'] },
  { day: 25, date: '2025-12-16', readings: ['رومية 15', '1 كورنثوس 6'], book: '1 كورنثوس', summary: 'بداية رسالة كورنثوس الأولى - بولس يعالج مشاكل الانقسامات في الكنيسة ويدعو للوحدة في المسيح.' },
  { day: 26, date: '2025-12-17', readings: ['1 كورنثوس 7', '1 كورنثوس 12'] },
  { day: 27, date: '2025-12-18', readings: ['1 كورنثوس 13', '2 كورنثوس 5'], book: '2 كورنثوس', summary: 'بداية رسالة كورنثوس الثانية - بولس يدافع عن خدمته الرسولية ويشجع المؤمنين على التوبة والمصالحة.' },
  { day: 28, date: '2025-12-19', readings: ['2 كورنثوس 6', '2 كورنثوس 13'] },
  { day: 29, date: '2025-12-20', readings: ['غلاطية 1', 'غلاطية 6'], book: 'غلاطية', summary: 'رسالة غلاطية - بولس يدافع بقوة عن إنجيل النعمة ضد التعاليم الخاطئة التي تطلب الالتزام بالناموس للخلاص.' },
  { day: 30, date: '2025-12-21', readings: ['أفسس 1', 'فيلبي 3'], book: 'أفسس', summary: 'بداية رسالة أفسس - بولس يشرح غنى البركات الروحية في المسيح والدعوة للحياة المقدسة.' },
  
  // ديسمبر 2025
  { day: 31, date: '2025-12-22', readings: ['فيلبي 4', 'كولوسي 4'], book: 'فيلبي', summary: 'فيلبي وكولوسي - رسائل تركز على الفرح في المسيح وسمو المسيح على كل شيء.' },
  { day: 32, date: '2025-12-23', readings: ['1 تسالونيكي 1', 'سالونيكى 1 و 2'], book: '1 تسالونيكي', summary: 'رسائل تسالونيكي - تعليم عن المجيء الثاني للمسيح وكيف نعيش في انتظاره.' },
  { day: 33, date: '2025-12-24', readings: ['2 تيموثاوس 2', '1 تيموثاوس 3'] },
  { day: 34, date: '2025-12-25', readings: ['بطرس + فيليمون', 'عبرانيين 9'], book: 'عبرانيين', summary: 'رسالة العبرانيين - تظهر تفوق المسيح على كل شيء في العهد القديم وأنه الكاهن الأعظم والذبيحة الكاملة.' },
  { day: 35, date: '2025-12-26', readings: ['عبرانيين 10', 'يعقوب 1'], book: 'يعقوب', summary: 'رسالة يعقوب - إيمان عملي يظهر في الأعمال الصالحة والحكمة من فوق.' },
  { day: 36, date: '2025-12-27', readings: ['يعقوب 2', '1 بطرس 4'], book: '1 بطرس', summary: 'رسالة بطرس الأولى - تشجيع للمؤمنين الذين يواجهون الاضطهادات والتجارب.' },
  { day: 37, date: '2025-12-28', readings: ['1 بطرس 5', '2 يوحنا 4'], book: '2 يوحنا', summary: 'رسائل يوحنا - التأكيد على المحبة والحق والثبات في المسيح.' },
  { day: 38, date: '2025-12-29', readings: ['رؤيا 1', 'رؤيا 3'], book: 'رؤيا', summary: 'بداية سفر الرؤيا - رؤيا يوحنا للمسيح الممجد ورسائله للكنائس السبع.' },
  { day: 39, date: '2025-12-30', readings: ['رؤيا 4', 'رؤيا 13'] },
  { day: 40, date: '2025-12-31', readings: ['رؤيا 14', 'رؤيا 22'] },
];

export const getTodayReading = (): Reading | null => {
  const today = new Date();
  const month = today.getMonth() + 1; // 11 = نوفمبر، 12 = ديسمبر
  const day = today.getDate();
  
  return readingPlan.find(r => {
    const [year, m, d] = r.date.split('-');
    return parseInt(m) === month && parseInt(d) === day;
  }) || null;
};

export const getReadingByDay = (dayNumber: number): Reading | undefined => {
  return readingPlan.find(r => r.day === dayNumber);
};

export const getProgressPercentage = (completedDays: number[]): number => {
  return Math.round((completedDays.length / readingPlan.length) * 100);
};

export const getStreak = (completedDays: number[]): number => {
  if (completedDays.length === 0) return 0;
  
  const sorted = [...completedDays].sort((a, b) => b - a);
  let streak = 1;
  
  for (let i = 0; i < sorted.length - 1; i++) {
    if (sorted[i] - sorted[i + 1] === 1) {
      streak++;
    } else {
      break;
    }
  }
  
  return streak;
};